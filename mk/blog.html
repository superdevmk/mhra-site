<!DOCTYPE html>
<html lang="mk">
  <head>
    <meta charset="UTF-8" />
    <title data-i18n="blog_title">Блог | МАЧР</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="../assets/css/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- HEADER -->
    <header class="header">
      <div class="nav-wrapper">
        <div class="nav">
          <a href="index.html" class="nav__brand">
            <img
              src="../assets/img/mhra_logo.jpg"
              alt="MHRA Logo"
              class="nav__logo-img"
            />
          </a>

          <nav class="nav__menu">
            <div class="nav__links">
              <a class="nav__link" href="index.html" data-i18n="nav_home">Почетна</a>
              <a class="nav__link" href="about.html" data-i18n="nav_about">За нас</a>
              <a class="nav__link" href="activities.html" data-i18n="nav_activities">Активности</a>
              <a class="nav__link" href="galleries.html" data-i18n="nav_galleries">Галерии</a>
              <a class="nav__link" href="events.html" data-i18n="nav_events">HR настани</a>
              <a class="nav__link nav__link--active" href="blog.html" data-i18n="nav_blog">Блог</a>
              <a class="nav__link" href="membership.html" data-i18n="nav_membership">Членство</a>
              <a class="nav__link" href="contact.html" data-i18n="nav_contact">Контакт</a>
            </div>

            <div class="nav__lang">
              <button data-lang="mk" class="nav__lang-btn">MK</button> |
              <button data-lang="en" class="nav__lang-btn">EN</button>
            </div>

            <div class="nav__cta">
              <a href="membership.html" class="btn btn--primary" data-i18n="nav_cta_join"></a>
            </div>
          </nav>

          <button class="nav__toggle" aria-label="menu">
            <span class="nav__toggle-bar"></span>
          </button>
        </div>
      </div>
    </header>

    <main>
      <section class="section">
        <div class="section-shell section-shell--hero">
          <!-- HEADER BLOG -->
          <div class="section__header blog__header">
            <div>
              <h1 class="section__title" data-i18n="blog_title">Блог</h1>
              <p class="section__subtitle" data-i18n="blog_sub">
                Статии, анализи и објави од областа на човечките ресурси.
              </p>
            </div>

            <!-- Копче за автори (login/logout) -->
            <a id="author-btn" class="btn btn--outline" href="login.html">
              Најава за автор
            </a>
          </div>

          <!-- CREATE POST (само кога е најавен корисникот) -->
          <section
            id="create-post-section"
            class="blog-create"
            style="display: none; margin: 1rem 0 1.5rem 0;"
          >
            <div class="card" style="padding: 1rem;">
              <h2 style="margin: 0 0 .75rem 0;">Креирај нов блог</h2>

              <form id="create-post-form" class="blog-form">
                <div class="form-group">
                  <label class="form__label" for="post-title">Наслов</label>
                  <input
                    id="post-title"
                    class="input"
                    type="text"
                    placeholder="Внеси наслов..."
                    required
                  />
                </div>

                <div class="form-group" style="margin-top:.75rem;">
                  <label class="form__label" for="post-image">
                    Слика (опционално)
                  </label>
                  <input
                    id="post-image"
                    class="input"
                    type="file"
                    accept="image/*"
                  />
                </div>

                <div class="form-group" style="margin-top:.75rem;">
                  <label class="form__label" for="post-body">
                    Содржина
                  </label>
                  <textarea
                    id="post-body"
                    class="input"
                    style="min-height: 160px;"
                    placeholder="Напиши содржина (поддржан е Markdown)..."
                    required
                  ></textarea>
                </div>

                <p
                  id="create-post-status"
                  class="section__subtitle"
                  style="margin-top:.75rem;"
                ></p>

                <div
                  style="display:flex; gap:.5rem; margin-top: 1rem; flex-wrap: wrap;"
                >
                  <button class="btn btn--primary" type="submit">
                    Објави блог
                  </button>
                </div>
              </form>
            </div>
          </section>

          <!-- BLOG LIST GRID -->
          <section class="blog-list">
            <div
              id="blog-empty"
              class="section__subtitle"
              style="margin-top: 1rem; display: none"
              data-i18n="blog_no_posts"
            >
              Во моментов нема објавени блог текстови.
            </div>

            <div id="blog-grid" class="grid grid--3"></div>
          </section>
        </div>
      </section>
    </main>

    <!-- BLOG MODAL (POPUP) -->
    <div id="blog-modal" class="blog-modal" aria-hidden="true">
      <div class="blog-modal__backdrop"></div>
      <div class="blog-modal__content blog-modal__dialog">
        <button class="blog-modal__close" type="button" aria-label="Close">
          ×
        </button>

        <h2 id="blog-modal-title"></h2>

        <div class="blog-modal__meta">
          <span id="blog-modal-author"></span>
          <span id="blog-modal-date"></span>
        </div>

        <!-- Слика во модал (ако има) -->
        <img
          id="blog-modal-image"
          class="blog-modal__image"
          style="display:none; max-width:100%; height:auto; margin: 1rem 0;"
          alt=""
        />

        <div id="blog-modal-body" class="blog-modal__body"></div>

        <div class="blog-modal__actions" style="margin-top:1rem;">
          <button
            type="button"
            id="blog-modal-delete"
            class="btn btn--danger"
            style="display:none;"
          >
            Избриши блог
          </button>
        </div>
      </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
      <div class="footer__inner">
        <div class="footer__top">
          <div>
            <div class="footer__brand" data-i18n="footer_brand"></div>
            <p data-i18n="footer_desc"></p>
          </div>
          <div>
            <p><strong data-i18n="footer_contact"></strong></p>
            <p>
              Адреса: Македонска асоцијација за човечки ресурси<br />
              Бул. ВМРО бр. 7/1-7<br />
              1000 Скопје, Македонија
            </p>
            <p>Email: contact@mhra.mk</p>
          </div>
          <div>
            <p><strong data-i18n="footer_links_title"></strong></p>
            <div class="footer__links">
              <a href="index.html" data-i18n="footer_link_home"></a>
              <a href="membership.html" data-i18n="footer_link_membership"></a>
              <a href="contact.html" data-i18n="footer_link_contact"></a>
              <a href="#" data-i18n="footer_link_privacy"></a>
              <a href="#" data-i18n="footer_link_terms"></a>
            </div>
          </div>
        </div>

        <div class="footer__bottom">
          © <span id="year-blog-mk"></span> MHRA ·
          <span data-i18n="footer_rights"></span>
        </div>
      </div>
    </footer>

    <script>
      document.getElementById("year-blog-mk").textContent =
        new Date().getFullYear();
    </script>

    <!-- Skriptet ekzistuese -->
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/i18n.js"></script>

    <!-- Supabase (CDN + klienti + auth + posts) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../assets/js/supabaseClient.js"></script>
    <script src="../assets/js/auth.js"></script>
    <script src="../assets/js/posts.js"></script>

    <!-- Markdown + blog logjika -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="../assets/js/blog.js"></script>
  </body>
</html>
